<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <link href="output.css" rel="stylesheet">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <script src="js/config.js"></script>
  <script>
    (function () {
      var src = (window.API_BASE || '') + '/socket.io/socket.io.js';
      var s = document.createElement('script');
      s.src = src;
      s.onerror = function () {
        var cdn = document.createElement('script');
        cdn.src = 'https://cdn.socket.io/4.7.2/socket.io.min.js';
        document.head.appendChild(cdn);
      };
      document.head.appendChild(s);
    })();
  </script>

</head>
<body class="bg-gray-100 min-h-screen p-6 font-sans">

  <!-- Page Title -->
  <h1 class="text-3xl font-extrabold text-gray-900 tracking-tight mb-8">Admin Dashboard</h1>

  <!-- Upload PDFs Card -->
  <div class="bg-white rounded-2xl shadow-lg p-6 mb-10 border border-gray-100">
    <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
      ğŸ“‚ Upload PDFs
    </h2>

    <!-- Drag & Drop Area -->
    <div id="dropZone"
      class="border-2 border-dashed border-gray-300 p-8 rounded-xl text-center cursor-pointer hover:border-blue-400 hover:bg-blue-50 transition-colors duration-200 ease-in-out">
      <p class="text-gray-500 mb-2 font-medium">Drag & drop a PDF here</p>
      <p class="text-gray-400 text-sm">or click to select</p>
      <input type="file" id="pdfInput" name="pdf" accept="application/pdf" class="hidden" />
    </div>

    <!-- Upload Button -->
    <button id="uploadBtn"
      class="mt-5 w-full bg-red-600 text-white py-2.5 rounded-lg font-medium shadow-sm hover:bg-black-700 active:scale-95 transition">
      Upload PDF
    </button>

    <!-- Progress Bar -->
    <div class="mt-4 w-full bg-gray-200 rounded-full h-2 hidden">
      <div id="progressBar" class="bg-blue-500 h-2 rounded-full w-0"></div>
    </div>

    <!-- Uploaded PDF Preview -->
    <ul id="pdfPreview" class="mt-4 space-y-2 text-red-700 text-sm"></ul>

    <!-- Upload Message -->
    <div id="uploadMessage" class="mt-3 font-medium"></div>
  </div>

  <!-- Create Quiz Card -->
  <div class="bg-white rounded-2xl shadow-lg p-6 mb-10 border border-gray-100">
    <h2 class="text-xl font-semibold text-red-800 mb-4 flex items-center gap-2">
      ğŸ“ Create New Quiz
    </h2>
    <form id="quizForm" class="space-y-4">
      <div>
        <label class="block text-red-700 font-medium mb-1">Quiz Title</label>
        <input type="text" id="quizTitle"
          class="border border-red-300 px-3 py-2 rounded-lg w-full focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"
          required />
      </div>
      <div id="questionsContainer"></div>
      <div class="flex gap-3">
        <button type="button" id="addQuestionBtn"
          class="bg-green-600 text-white px-4 py-2 rounded-lg font-medium shadow-sm hover:bg-green-700 active:scale-95 transition">
          Add Question
        </button>
        <button type="submit"
          class="bg-blue-600 text-white px-4 py-2 rounded-lg font-medium shadow-sm hover:bg-blue-700 active:scale-95 transition">
          Create Quiz
        </button>
      </div>
    </form>
    <div id="quizMessage" class="mt-4 text-sm"></div>
  </div>

  <!-- Live Audio Card -->
<div class="bg-white rounded-2xl shadow-lg p-6 mb-10 border border-gray-100">
  <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
    ğŸ¤ Broadcast Live Lecture
  </h2>
  <button id="startBroadcast"
    class="bg-red-600 text-white px-4 py-2 rounded-lg font-medium shadow-sm hover:bg-red-700 active:scale-95 transition">
    Start Broadcast
  </button>
  <video id="localVideo" autoplay playsinline muted
    class="mt-4 w-full rounded-lg border border-gray-200 shadow-sm"></video>
</div>


  <!-- Chat Card -->
  <div class="bg-white rounded-2xl shadow-lg p-6 mb-10 border border-gray-100">
    <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
      ğŸ’¬ Live Chat
    </h2>
    <div id="chatBox"
      class="border border-gray-300 p-3 h-48 overflow-y-auto mb-3 rounded-lg bg-gray-50 text-sm space-y-2"></div>
    <input id="chatInput"
      class="border border-gray-300 px-3 py-2 w-full rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"
      placeholder="Type message..." />
  </div>

  <!-- Logout Button -->
  <div class="text-right">
    <button id="logoutBtn"
      class="bg-red-600 text-white px-5 py-2.5 rounded-lg font-medium shadow-md hover:bg-red-700 active:scale-95 transition">
      Logout
    </button>
  </div>

  <!-- JS Modules -->
  <script src="js/main.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/pdf-upload.js"></script>
  <script src="js/quiz-admin-dynamic.js"></script>
  <script src="js/chat.js"></script>
  <script src="js/webrtc.js"></script>
  <script src="js/logout.js"></script>

</body>
</html>
